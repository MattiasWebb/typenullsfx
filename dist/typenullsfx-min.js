export class typenullsfx{sfx_list;audioEles;constructor(e){this.sfx_list=e,this.audioEles={};for(let[t,s]of Object.entries(this.sfx_list)){let i=document.createElement("audio");function o(){i.removeEventListener("ended",o),i.pause(),i.remove()}i.src=s,i.setAttribute("preload","auto"),i.setAttribute("controls","none"),i.volume=0,i.load(),this.audioEles[t]=i,i.addEventListener("ended",o)}this.init()}init(){document.querySelectorAll("[nsfx]").forEach((e=>{e.getAttribute("nsfx").trim().split(";").forEach((t=>{let s,i,[o,l]=t.trim().split("?",2);[o,s]=o.trim().split("!",2),[l,i]=l.trim().split("%",2),e.addEventListener(o,(t=>{t.stopPropagation(),"key"===o.substring(0,3)&&s&&t.key!==s||this.play(l,i??e.getAttribute("nsfx-vol"),t)}))}))}))}play(e,t=null,s){let i=this.audioEles[e].cloneNode();i.currentTime=0,i.volume=parseFloat(t??"1"),i.volume=isNaN(i.volume)?1:i.volume,i.play(),i.addEventListener("ended",(function e(){i.removeEventListener("ended",e),i.pause(),i.remove()}))}}